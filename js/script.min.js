function audio_control(){1==play_status?(audio.pause(),play_status=!1,document.getElementById("sound_on_off").innerHTML=sound_off):(audio.play(),play_status=!0,document.getElementById("sound_on_off").innerHTML=sound_on)}function local_save(e,t,o,n,r){"undefined"!=typeof Storage&&(localStorage.setItem("score",e),localStorage.setItem("move",t),localStorage.setItem("reset",o),localStorage.setItem("complete",n),localStorage.setItem("hint",r))}function local_load(){"undefined"!=typeof Storage&&(complete_game=parseInt(localStorage.getItem("complete")),complete_game?(best_score=parseInt(localStorage.getItem("score")),NaN==best_score&&(best_score=0),overall_move=parseInt(localStorage.getItem("move")),isNaN(overall_move)&&(overall_move=0),overall_reset=parseInt(localStorage.getItem("reset")),isNaN(overall_reset)&&(overall_reset=0),total_hint_counter=parseInt(localStorage.getItem("hint")),isNaN(total_hint_counter)&&(total_hint_counter=0),document.getElementById("score_button").innerHTML="SCORE("+best_score.toString()+")",document.getElementById("score_button").style.display="inline"):complete_game=0,smartbanner_flag=parseInt(localStorage.getItem("smartflag")),isNaN(smartbanner_flag)&&(smartbanner_flag=0))}function redirect(e){switch(e){case 1:window.open("https://saythanks.io/to/lightsout");break;case 2:swal({title:"Bitocin Wallet",text:"1XGr9qbZjBpUQJJSB6WtgBQbDTgrhPLPA",customClass:"swal-bitcoin"});break;case 3:window.open("https://beerpay.io/sepandhaghighi/lightsout");break;case 4:window.open("https://www.payping.ir/sepandhaghighi");break;case 5:window.open("help.html","_self");break;case 6:window.open("donate.html","_self");break;case 7:window.open("index.html","_self");break;case 8:hint_counter+=1,total_hint_counter+=1,document.getElementById("Hint").innerHTML="Hint ("+hint_counter+")",swal({title:"Hint",text:'<table align="center" style="font-size:26px"><tr style="font-size:31px"><th >Bottom</th><th >Top</th></tr><tr><td>O---O</td><td>OO---</td></tr><tr><td>-O-O-</td><td>O--O-</td></tr><tr><td>OOO--</td><td>-O---</td></tr><tr><td>--OOO</td><td>---O-</td></tr><tr><td>O-OO-</td><td>----O</td></tr><tr><td>-OO-O</td><td>O----</td></tr><tr><td>OO-OO</td><td>--O--</td> </tr></table>',html:!0});break;case 9:complete_game>0&&swal({title:"Score!",text:'<table align="center" style="font-size:26px"><tr><td>Best Score</td><td>'+best_score.toString()+"</td></tr><tr><td>Game</td><td>"+complete_game.toString()+"</td></tr><tr><td>Total Move</td><td>"+overall_move.toString()+"</td></tr><tr><td>Total Reset</td><td>"+overall_reset.toString()+"</td></tr><tr><td>Total Hint</td><td>"+total_hint_counter.toString()+"</td></tr></table>",html:!0,customClass:"swal-score"});break;default:window.open("https://saythanks.io/to/lightsout")}}function swal_help(){swal({title:"Hi",text:'<p style="text-align:justify">The game consists of a 5 by 5 grid of lights. When the game starts, a random number or a stored pattern of these lights is switched on. Pressing any of the lights will toggle it and the four adjacent lights. The goal of the puzzle is to switch all the lights off, preferably in as few button presses as possible. After first touch you have 3 minutes to win as many as possible ;-)</p>',html:!0,customClass:"swal-wide"})}function getname(){local_load(),getMobileOperatingSystem(),swal_help(),init(1)}function init(e){first_init=1,linear_gradient=Math.round(Math.random()),color=CSS_COLOR_NAMES[Math.floor(Math.random()*CSS_COLOR_NAMES.length)].toLowerCase();var t,o,n,r,a,l,i=[];for(n=0,a=document.getElementById("game_name"),a.style.color=color,a.innerHTML="Lights Out Game",r=document.getElementById("move"),l=document.getElementById("reset"),init_flag=!0,2==e&&(reset_counter+=1,overall_reset+=1,overall_move-=parseInt(r.innerHTML),total_move-=parseInt(r.innerHTML),l.innerHTML="Reset ("+reset_counter+")");random_init>n;)o=Math.floor(25*Math.random()+1),i.indexOf(o)<0&&(i.push(o),n+=1);for(t=1;26>t;t++)document.getElementById(t.toString()).style.backgroundColor=color,document.getElementById(t.toString()).innerHTML="";for(t=0;t<i.length;t++)reply_click(i[t].toString());r.innerHTML=0,init_flag=!1}function reply_click(e){var t,o;o=document.getElementById("move"),(1==first_move&&0==init_flag||1==focus_flag)&&(display=document.querySelector("#time"),startTimer(time,display),first_move=!1,focus_flag=!1),t=parseInt(e),1==first_init&&(25>=t+5&&toggle(t+5),t-5>=1&&toggle(t-5),(t-1)%5==0?toggle(t+1):t%5==0?toggle(t-1):(toggle(t-1),toggle(t+1)),0==init_flag&&(o.innerHTML=parseInt(o.innerHTML)+1,total_move+=1,overall_move+=1),toggle(t),end_game()),no_move_counter=0}function toggle(e){var t;t=document.getElementById(e.toString()),"white"!=t.style.backgroundColor?(t.style.backgroundColor="white",t.innerHTML=lamp_awsome):(t.style.backgroundColor=color,t.innerHTML="")}function end_game(){var e,t,o;for(t=0,e=1;26>e;e++)if(""!=document.getElementById(e.toString()).innerHTML){t+=1;break}0==t&&(score+=1,o=document.getElementById("win"),o.innerHTML=parseInt(o.innerHTML)+1,random_init=Math.min(random_init+1,15),init(1))}function restart_game(){0==reset_counter&&1==first_move&&0==hint_counter?swal("Restart???!!!"):swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(e){e&&(0==first_move?1==focus_flag?(focus_flag=!1,overall_move-=total_move,overall_reset-=reset_counter,total_hint_counter-=hint_counter,time=180,restart_config(document.querySelector("#time"))):restart_flag=1:(reset=document.getElementById("reset"),reset.innerHTML="Reset!",document.getElementById("Hint").innerHTML="Hint",overall_reset-=reset_counter,total_hint_counter-=hint_counter,reset_counter=0,hint_counter=0))})}function startTimer(e,t){var o,n,r=e,a=setInterval(function(){o=parseInt(r/60,10),n=parseInt(r%60,10),document.hasFocus()||(focus_flag=!0,clearInterval(a),time=r),o=10>o?"0"+o:o,n=10>n?"0"+n:n,t.textContent=o+":"+n,no_move_counter+=1,r==e/2?t.style.color="orange":60==r&&(t.style.color="red"),no_move_counter>=60&&r>100&&(swal({title:"Hurry Up!!!",imageUrl:"images/hurry.png"}),no_move_counter=0),(--r<0||1==restart_flag)&&(0==restart_flag?(score>best_score?(best_score=score,new_record_notif="<h2>New Record!</h2>&nbsp;"):new_record_notif="",complete_game+=1,document.getElementById("score_button").innerHTML="SCORE("+best_score.toString()+")",local_save(best_score,overall_move,overall_reset,complete_game,total_hint_counter),1==complete_game&&(document.getElementById("score_button").style.display="inline"),swal({title:"Time's Up",text:new_record_notif+'<table align="center" style="font-size:26px"><tr><td>Score</td><td>'+score.toString()+"</td></tr><tr><td>Reset</td><td>"+reset_counter.toString()+"</td></tr><tr><td>Move</td><td>"+total_move.toString()+"</td></tr><tr><td>Hint</td><td>"+hint_counter.toString()+"</td></tr></table>",html:!0,customClass:"swal-score",imageUrl:"images/timeup.png"})):(overall_move-=total_move,overall_reset-=reset_counter,total_hint_counter-=hint_counter),r=e,time=180,restart_config(t),clearInterval(a))},1e3)}function restart_config(e){e.textContent="TI:ME",total_move=0,random_init=1,e.style.color="black",win=document.getElementById("win"),win.innerHTML=0,score=0,reset=document.getElementById("reset"),reset.innerHTML="Reset!",document.getElementById("Hint").innerHTML="Hint",hint_counter=0,reset_counter=0,first_move=!0,restart_flag=0,init(1)}function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(e),/android/i.test(e)&&3>smartbanner_flag&&(document.getElementById("smartabanner").style.display="block"),/iPad|iPhone|iPod/.test(e)&&!window.MSStream}function close_banner(){document.getElementById("smartabanner").style.display="none",smartbanner_flag+=1,localStorage.setItem("smartflag",smartbanner_flag)}function apkdownload(){smartbanner_flag=3,localStorage.setItem("smartflag",smartbanner_flag)}var CSS_COLOR_NAMES=["Aqua","Aquamarine","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","Darkorange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","ForestGreen","Fuchsia","Gainsboro","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","Yellow","YellowGreen"],color,reset_counter=0,lamp_awsome='<i class="fa fa-lightbulb-o fa-3x" aria-hidden="true"></i>',spinner='<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>',sound_on='<i class="fa fa-volume-up fa-3x" aria-hidden="true" ></i>',sound_off='<i class="fa fa-volume-off fa-3x" aria-hidden="true"></i>',first_init=0,player_name=null,score=0,best_score=0,first_move=!0,init_flag=!1,total_move=0,overall_move=0,restart_flag=0,overall_reset=0,hint_counter=0,total_hint_counter=0,no_move_counter=0,random_init=1,music_temp=[],complete_game=0,hr=(new Date).getHours(),music_list=["files/bensound-anewbeginning.mp3","files/bensound-happiness.mp3","files/bensound-tenderness.mp3","files/bensound-cute.mp3","files/bensound-buddy.mp3"],music_random=Math.floor(Math.random()*music_list.length),audio=new Audio(music_list[music_random]),play_status=!1,new_record_notif="",player_name_object,focus_flag=!1,smartbanner_flag=0,time=180;audio.onended=function(){music_temp.push(music_list.splice(music_random,1)),music_random=Math.floor(Math.random()*music_list.length),audio.src=music_list[music_random],audio.load(),1==music_list.length&&(music_list.push.apply(music_list,music_temp),music_temp=[]),audio.play()},(hr>=19||6>hr)&&(lamp_awsome='<i class="fa fa-lightbulb-o fa-3x" aria-hidden="true" style="color:gold"></i>'),shortcut.add("h",function(){redirect(8)}),shortcut.add("r",function(){init(2)}),shortcut.add("q",function(){swal_help()});